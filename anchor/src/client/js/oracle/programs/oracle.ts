/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  containsBytes,
  fixEncoderSize,
  getBytesEncoder,
  type Address,
  type ReadonlyUint8Array,
} from '@solana/kit';
import {
  type ParsedInitializeInstruction,
  type ParsedSubmitMeterReadingInstruction,
  type ParsedTriggerMarketClearingInstruction,
  type ParsedUpdateApiGatewayInstruction,
  type ParsedUpdateOracleStatusInstruction,
} from '../instructions';

export const ORACLE_PROGRAM_ADDRESS =
  'DvdtU4quEbuxUY2FckmvcXwTpC9qp4HLJKb1PMLaqAoE' as Address<'DvdtU4quEbuxUY2FckmvcXwTpC9qp4HLJKb1PMLaqAoE'>;

export enum OracleAccount {
  OracleData,
}

export function identifyOracleAccount(
  account: { data: ReadonlyUint8Array } | ReadonlyUint8Array
): OracleAccount {
  const data = 'data' in account ? account.data : account;
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([26, 131, 25, 110, 6, 141, 10, 37])
      ),
      0
    )
  ) {
    return OracleAccount.OracleData;
  }
  throw new Error(
    'The provided account could not be identified as a oracle account.'
  );
}

export enum OracleInstruction {
  Initialize,
  SubmitMeterReading,
  TriggerMarketClearing,
  UpdateApiGateway,
  UpdateOracleStatus,
}

export function identifyOracleInstruction(
  instruction: { data: ReadonlyUint8Array } | ReadonlyUint8Array
): OracleInstruction {
  const data = 'data' in instruction ? instruction.data : instruction;
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([175, 175, 109, 31, 13, 152, 155, 237])
      ),
      0
    )
  ) {
    return OracleInstruction.Initialize;
  }
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([181, 247, 196, 139, 78, 88, 192, 206])
      ),
      0
    )
  ) {
    return OracleInstruction.SubmitMeterReading;
  }
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([180, 116, 162, 167, 37, 28, 78, 159])
      ),
      0
    )
  ) {
    return OracleInstruction.TriggerMarketClearing;
  }
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([66, 69, 252, 242, 127, 168, 42, 112])
      ),
      0
    )
  ) {
    return OracleInstruction.UpdateApiGateway;
  }
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([17, 18, 199, 125, 53, 122, 91, 63])
      ),
      0
    )
  ) {
    return OracleInstruction.UpdateOracleStatus;
  }
  throw new Error(
    'The provided instruction could not be identified as a oracle instruction.'
  );
}

export type ParsedOracleInstruction<
  TProgram extends string = 'DvdtU4quEbuxUY2FckmvcXwTpC9qp4HLJKb1PMLaqAoE',
> =
  | ({
      instructionType: OracleInstruction.Initialize;
    } & ParsedInitializeInstruction<TProgram>)
  | ({
      instructionType: OracleInstruction.SubmitMeterReading;
    } & ParsedSubmitMeterReadingInstruction<TProgram>)
  | ({
      instructionType: OracleInstruction.TriggerMarketClearing;
    } & ParsedTriggerMarketClearingInstruction<TProgram>)
  | ({
      instructionType: OracleInstruction.UpdateApiGateway;
    } & ParsedUpdateApiGatewayInstruction<TProgram>)
  | ({
      instructionType: OracleInstruction.UpdateOracleStatus;
    } & ParsedUpdateOracleStatusInstruction<TProgram>);
